
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>Dump SQL pour PostgreSQL &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="ESRI Personal GeoDatabase" href="pgeo.html" />
    <link rel="prev" title="PostgreSQL / PostGIS" href="pg.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="pgeo.html" title="ESRI Personal GeoDatabase"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="pg.html" title="PostgreSQL / PostGIS"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">Dump SQL pour PostgreSQL</a><ul>
<li><a class="reference internal" href="#options-de-creation">Options de création</a><ul>
<li><a class="reference internal" href="#options-de-creation-de-jeu-de-donnees">Options de création de jeu de données</a></li>
<li><a class="reference internal" href="#options-de-creation-de-couche">Options de création de couche</a></li>
<li><a class="reference internal" href="#variables-d-environnement">Variables d&#8217;environnement</a></li>
<li><a class="reference internal" href="#exemple">Exemple</a></li>
<li><a class="reference internal" href="#voir-egalement">Voir également</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="pg.html"
                                  title="Chapitre précédent">PostgreSQL / PostGIS</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="pgeo.html"
                                  title="Chapitre suivant">ESRI Personal GeoDatabase</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/pgdump.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dump-sql-pour-postgresql">
<span id="gdal-ogr-formats-pgdump"></span><h1>Dump SQL pour PostgreSQL<a class="headerlink" href="#dump-sql-pour-postgresql" title="Lien permanent vers ce titre">¶</a></h1>
<p>(GDAL/OGR &gt;= 1.8.0)</p>
<p>Ce pilote en écriture seul implémente la gestion de la génération de fichier dump
SQL qui peut être injecté plus tard dans une instance live de PostgreSQL. Il gère
la version étendue de PostgreSQL avec les géométries <a class="reference external" href="http://www.postgis.org/&quot;">PostGIS</a>.</p>
<p>Ce pilote est très similaire à la commande shp2pgsql de PostGIS.</p>
<p>La plupart des options de création sont partagé avec le pilote normale PostgreSQL.</p>
<p>Le pilote ouvre le fichier en sortie via l&#8217;API VSIF Large, il est donc possible
de définir /vsistdout/ comme fichier en sortie pour tout envoyer dans la sortie
standard.</p>
<div class="section" id="options-de-creation">
<h2>Options de création<a class="headerlink" href="#options-de-creation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="section" id="options-de-creation-de-jeu-de-donnees">
<h3>Options de création de jeu de données<a class="headerlink" href="#options-de-creation-de-jeu-de-donnees" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><strong>LINEFORMAT :</strong> par défaut les fichiers sont créés avec la convention de
terminaison de ligne de la plateforme locale (CR/LF sous win32 ou LF sur tous
les autres systèmes).
Cela peut être écrasé par l&#8217;utilisation de l&#8217;option de création de couche
LINEFORMAT qui peut avoir les valeurs <strong>CRLF</strong> (format DOS) ou <strong>LF</strong> (format Unix).</li>
</ul>
</div>
<div class="section" id="options-de-creation-de-couche">
<h3>Options de création de couche<a class="headerlink" href="#options-de-creation-de-couche" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><strong>GEOM_TYPE :</strong> l&#8217;option de création de couche <em>GEOM_TYPE</em> peut être
définie à <em>Geometry</em>, &#8220;geography&#8221; (PostGIS &gt;= 1.5), pour forcer le type de la géométrie
utilisée pour une table. &#8220;geometry&#8221; est la valeur par défaut.</li>
<li><strong>LAUNDER :</strong> Il peut être définie à <em>YES</em> pour forcer les nouveaux champs
crées sur cette couche à avoir les noms de champs &#8220;nettoyer&#8221; dans une forme
compatible avec PostgreSQL. Cela convertie en minuscule et convertie certains
caractères  spéciaux comme &#8220;-&#8221; et &#8220;#&#8221; en &#8220;_&#8221;. Si <em>NO</em> les noms exacts seront
préservés. La valeur par défaut est <em>YES</em>. Si activé le nom de la table
(couche) sera également nettoyer.</li>
<li><strong>PRECISION :</strong> Il peut être définie à <em>YES</em> pour forcer la création de
nouveaux champs dans cette couche pour essayer de représenter l&#8217;information de
précision et longueur, si disponible en utilisant les types
<em>NUMERIC(width,precision)</em> ou <em>CHAR(width)</em>. Si <em>NO</em> alors les types <em>FLOAT8</em>,
<em>INTEGER</em> et <em>VARCHAR</em> seront utilisé à la place. <em>YES</em> pas défaut.</li>
<li><strong>DIM={2,3} :</strong> Contrôle la dimension de la couche. 3 par défaut. Important
à définir à 2 pour les couches 2D avec PostGIS 1.0+ puisqu&#8217;il a des
contraintes sur la dimension de la géométrie pendant le chargement.</li>
<li><strong>GEOMETRY_NAME :</strong> définie le nom de la colonne géométrique dans une
nouvelle table. S&#8217;il est omis, sera définie par défaut à <em>wkb_geometry</em> pour
GEOM_TYPE=geometry, ou <em>the_geog</em> pour GEOM_TYPE=geography..</li>
<li><strong>SCHEMA :</strong> Définie le nom du schéma pour une nouvelle table. L&#8217;utilisation
d&#8217;un même nom de couche dans un schéma différent est gérée, mais pas dans un
schéma public ou autres.</li>
<li><strong>CREATE_SCHEMA :</strong> (OGR &gt;= 1.8.1) à utiliser en combinaison avec SCHEMA. Définie
à ON par défaut afin que l&#8217;instruction CREATE SCHEMA soit émise. Placez à OFF
pour empêcher CREATE SCHEMA d&#8217;être envoyée.</li>
<li><strong>SPATIAL_INDEX :</strong> définie à <em>ON</em> par défaut. Créé un index spatial sur la
colonne géométrique pour accélérer les requêtes. Définissez-la à <em>OFF</em> pour la
désactiver (a un effet seulement quand PostGIS est disponible).</li>
<li><strong>TEMPORARY :</strong> définie à OFF par défaut. Créé une table temporaire au lieu
d&#8217;une table permanente.</li>
<li><strong>WRITE_EWKT_GEOM :</strong> définie à OFF par défaut. Placez à ON pour écrire des
géométrie EWKT au lieu de géométries HEX. Cette option n&#8217;aura pas d&#8217;effet si la
variable d&#8217;environnement PG_USE_COPY est à YES.</li>
<li><strong>CREATE_TABLE :</strong> définie à ON par défaut afin que les tables soient recréées
si nécessaire. Placer à OFF pour désactiver cela et utiliser une structure de
table existante.</li>
<li><strong>DROP_TABLE :</strong> (OGR &gt;= 1.8.1) définie à ON par défaut afin que les tables
soient détruites avant d&#8217;être recréées. Placer à OFF pour éviter que <tt class="docutils literal"><span class="pre">DROP</span> <span class="pre">TABLE</span></tt>
ne soit envoyé. Définissez le en IF_EXISTS dans le but d&#8217;émettre <tt class="docutils literal"><span class="pre">DROP</span> <span class="pre">TABLE</span>
<span class="pre">IF</span> <span class="pre">EXISTS</span></tt> (nécessite PostgreSQL &gt;= 8.2).</li>
<li><strong>SRID :</strong> définie le SRID de la géométrie. -1 par défaut sauf si un SRS est
associé avec la couche. Dans ce cas, si le code EPSG est mentionné, il sera
utilisé comme SRID (Notez que la table spatial_ref_sys doit être correctement
remplie avec le SRID définie).</li>
</ul>
</div>
<div class="section" id="variables-d-environnement">
<h3>Variables d&#8217;environnement<a class="headerlink" href="#variables-d-environnement" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><strong>PG_USE_COPY :</strong> peut être à &#8220;YES&#8221; pour utiliser COPY lors de l&#8217;insertion des
données dans Postgresql. COPY est moins robuste que INSERT, mais est
significativement plus rapide.</li>
</ul>
</div>
<div class="section" id="exemple">
<h3>Exemple<a class="headerlink" href="#exemple" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">translation simple d&#8217;un shapefile vers PostgreSQL dans un fichier abc.sql.
la table &#8216;abc&#8217; sera créée avec les features à partir de abc.shp et les données
attributaires à partir de abc.dbf. Le SRID est spécifié. PG_USE_COPY est définie à
YES pour améliorer les performances.</p>
<div class="highlight-python"><pre>% ogr2ogr --config PG_USE_COPY YES -f PGDump abc.sql abc.shp -lco SRID=32631</pre>
</div>
</li>
<li><p class="first">renvoyer la sortie du pilote PGDump vers la commande psql.</p>
<div class="highlight-python"><pre>% ogr2ogr --config PG_USE_COPY YES -f PGDump /vsistdout/ abc.shp | psql -d my_dbname -f -</pre>
</div>
</li>
</ul>
</div>
<div class="section" id="voir-egalement">
<h3>Voir également<a class="headerlink" href="#voir-egalement" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="pg.html#gdal-ogr-formats-pg"><em>PostgreSQL / PostGIS</em></a></li>
<li><a class="reference external" href="http://www.postgresql.org/">Page principale de PostgreSQL</a></li>
<li><a class="reference external" href="http://www.postgis.org/">PostGIS</a></li>
<li><a class="reference external" href="http://trac.osgeo.org/postgis/wiki/UsersWikiOGR">Page d&#8217;exemple sur PostGIS / OGR Wiki</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="pgeo.html" title="ESRI Personal GeoDatabase"
             >suivant</a></li>
        <li class="right" >
          <a href="pg.html" title="PostgreSQL / PostGIS"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>