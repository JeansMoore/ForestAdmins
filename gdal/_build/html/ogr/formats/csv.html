
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>Comma Separated Value (.csv) &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="Microstation DGN" href="dgn.html" />
    <link rel="prev" title="CouchDB - CouchDB/GeoCouch" href="couchdb.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="dgn.html" title="Microstation DGN"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="couchdb.html" title="CouchDB - CouchDB/GeoCouch"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">Comma Separated Value (.csv)</a><ul>
<li><a class="reference internal" href="#format">Format</a></li>
<li><a class="reference internal" href="#lecture-de-fichier-csv-contenant-des-informations-spatiales">Lecture de fichier CSV contenant des informations spatiales</a></li>
<li><a class="reference internal" href="#problemes-lors-de-la-creation">Problèmes lors de la création</a><ul>
<li><a class="reference internal" href="#exemples">Exemples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sources-de-donnees-particulieres">Sources de données particulières</a></li>
<li><a class="reference internal" href="#autres-remarques">Autres remarques</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="couchdb.html"
                                  title="Chapitre précédent">CouchDB - CouchDB/GeoCouch</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="dgn.html"
                                  title="Chapitre suivant">Microstation DGN</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/csv.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="comma-separated-value-csv">
<span id="gdal-ogr-formats-csv"></span><h1>Comma Separated Value (.csv)<a class="headerlink" href="#comma-separated-value-csv" title="Lien permanent vers ce titre">¶</a></h1>
<p>OGR gère la lecture et l&#8217;écriture de données essentiellement tabulaire
non-spatiale dans des fichiers CSV texte. Les fichiers CSV sont des formats
d&#8217;échange commun entre les logiciels gérant les données tabulaires et sont
également facilement produit manuellement avec un éditeur de texte ou avec un
programme ou des scripts écrit par l&#8217;utilisateur.</p>
<p>Bien qu&#8217;en théorie les fichiers csv peuvent avoir n&#8217;importe quelle extension,
dans le but de reconnaitre automatiquement le format OGR gère seulement les
fichiers se terminant avec l&#8217;extension csv. Le nom de la source de données peut
être soit un fichier seul ou un répertoire. Pour qu&#8217;un répertoire soit reconnu
comme une source de données csv au moins la moitié des fichiers dans le
répertoire doivent avoir l&#8217;extension csv. Une couche (table) est produite pour
chaque fichiers csv accédés.</p>
<p>Starting with GDAL 1.8.0, for files structured as CSV, but not ending with
.CSV extension, the &#8216;CSV:&#8217; prefix can be added before the filename to force
loading by the CSV driver.</p>
<p>Le pilote CSV d&#8217;OGR gère la lecture et l&#8217;écriture. Parce que le format CSV a
des lignes de longueur variable, la lecture est réalisée séquentiellement. La
lecture des géométries dans un ordre aléatoire sera généralement très lente.
Les couches CSV d&#8217;OGR n&#8217;ont jamais de systèmes de coordonnées pour les objets.
Lors de la lecture d&#8217;un champ nommé &#8220;WKT&#8221; il est supposé contenir une géométrie
WKT, mais est également traité comme un champ normal. Le pilote CSV d&#8217;OGR
renverra tous les attributs des colonnes avec un type chaine de caractère s&#8217;il
n&#8217;y a aucun fichier d&#8217;information sur le type des champs (avec l&#8217;extension
.csvt) n&#8217;est disponible.</p>
<p>Une reconnaissance limitée des types peut être réalisé pour les entiers
(Integer), les réels (Real), les chaines de caractères (String), les dates
(Date : YYYY-MM-DD), Time (HH:MM:SS+nn) et DateTime (YYYY-MM-DD HH:MM:SS+nn)
par un fichier descriptif de même nom que le fichier CSV, mais avec l&#8217;extension
.csvt. Les types de chaque colonne doivent être listés en une seule ligne :
entouré de guillemet double et séparé par des virgules (par exemple, &#8220;Integer&#8221;,
&#8220;String&#8221;). Il est également possible de définir explicitement la largeur et la
précision de chaque colonne,par exemple &#8220;Integer(5)&#8221;,&#8221;Real(10.7)&#8221;,&#8221;String(15)&#8221;.
Le pilote utilisera alors ces types comme spécifiés pour les colonnes CSV.</p>
<div class="section" id="format">
<h2>Format<a class="headerlink" href="#format" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les fichiers CSV ont une ligne pour chaque objet (enregistrement) dans la couche
(table). Les valeurs du champ attributaire sont séparées par des virgules. Au
moins deux champs par ligne doivent être présent. Les lignes peuvent se terminer
par une terminaison de ligne du style DOS (CR/LF) ou Unix (LF). Chaque
enregistrement doit avoir le même nombre de champs. À partir de GDAL 1.7.0, le
pilote acceptera une virgule ou une tabulation comme séparateur de champs. Cette
auto-détection  fonctionnera seulement s&#8217;il n&#8217;y a pas d&#8217;autres séparateurs
potentiels  à la première ligne du ficheir CSV. Sinon la virgule sera la valeur
par défaut comme séparateur.</p>
<p>Les valeurs des attributs complexes (tels que ceux contenant des virgules, des
guillemets ou de nouvelles lignes) peuvent être placé entre double guillemet.
N&#8217;importe quelle occurrence de guillemet double dans une chaine entre guillemet
doit être doublé pour la protéger.</p>
<p>Le pilote tente de traiter la première ligne du fichier comme une liste de noms
de champ pour tous les champs. Cependant, si un ou plusieurs champs sont
numérique il est supposé que la première ligne est en réalité des valeurs de
données et des noms de champs factices sont générés en interne ((field_1 à
field_n) et le premier enregistrement est traité comme un objet.</p>
<p>Exemple (employee.csv):</p>
<div class="highlight-python"><pre>ID,Salary,Name,Comments
132,55000.0,John Walker,"The ""big"" cheese."
133,11000.0,Jane Lake,Cleaning Staff</pre>
</div>
<p>Notez que la valeur <em>Comments</em> pour le premier enregistrement de données est
placé entre guillemet double à cause de la valeur contenant un guillemet, et ces
guillemets doivent être doublé pour que nous sachions que nous avons pas atteint
la fin de la chaine du guillemet.</p>
<p>Plusieurs variations des entrées textuel sont parfois appelées fichiers à Valeur
Séparée par des Virgules (<em>Comma Separated Value</em>), incluant les fichiers sans
virgule, mais à colonne à largeur fixe, ceux utilisant des tabulations comme
séparateur ou ceux avec données auxiliaire définissant des types de champs ou
de structure. Ce pilote ne tente pas de gérer de tel fichier mais à la place
gère des fichiers .csv simple qui peuvent être reconnus automatiquement. Des
scripts ou d&#8217;autres mécanismes peuvent généralement convertir les autres
variations sous une forme qui est compatible avec le pilote CSV d&#8217;OGR.</p>
</div>
<div class="section" id="lecture-de-fichier-csv-contenant-des-informations-spatiales">
<h2>Lecture de fichier CSV contenant des informations spatiales<a class="headerlink" href="#lecture-de-fichier-csv-contenant-des-informations-spatiales" title="Lien permanent vers ce titre">¶</a></h2>
<p>Il est possible d&#8217;extraire l&#8217;information spatiale (points) d&#8217;un fichier CSV qui
possède des colonnes pour les coordonnées X et Y, par l&#8217;utilisation du pilote
VRT.</p>
<p>Considérez le fichier CSV suivant (test.csv) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Latitude</span><span class="p">,</span><span class="n">Longitude</span><span class="p">,</span><span class="n">Name</span>
<span class="mf">48.1</span><span class="p">,</span><span class="mf">0.25</span><span class="p">,</span><span class="s">&quot;First point&quot;</span>
<span class="mf">49.2</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="s">&quot;Second point&quot;</span>
<span class="mf">47.5</span><span class="p">,</span><span class="mf">0.75</span><span class="p">,</span><span class="s">&quot;Third point&quot;</span>
</pre></div>
</div>
<p>Vous pouvez écrire le fichier VRT associé (test.vrt) :</p>
<div class="highlight-python"><pre>&lt;OGRVRTDataSource&gt;
    &lt;OGRVRTLayer name="test"&gt;
        &lt;SrcDataSource&gt;test.csv&lt;/SrcDataSource&gt;
        &lt;GeometryType&gt;wkbPoint&lt;/GeometryType&gt;
        &lt;LayerSRS&gt;WGS84&lt;/LayerSRS&gt;
        &lt;GeometryField encoding="PointFromColumns" x="Longitude" y="Latitude"/&gt;
    &lt;/OGRVRTLayer&gt;
&lt;/OGRVRTDataSource&gt;</pre>
</div>
<p>et <tt class="docutils literal"><span class="pre">ogrinfo</span> <span class="pre">-ro</span> <span class="pre">-al</span> <span class="pre">test.vrt</span></tt> renverra :</p>
<div class="highlight-python"><pre>OGRFeature(test):1
    Latitude (String) = 48.1
    Longitude (String) = 0.25
    Name (String) = First point
    POINT (0.25 48.1 0)

OGRFeature(test):2
    Latitude (String) = 49.2
    Longitude (String) = 1.1
    Name (String) = Second point
    POINT (1.1 49.200000000000003 0)

OGRFeature(test):3
    Latitude (String) = 47.5
    Longitude (String) = 0.75
    Name (String) = Third point
    POINT (0.75 47.5 0)</pre>
</div>
</div>
<div class="section" id="problemes-lors-de-la-creation">
<h2>Problèmes lors de la création<a class="headerlink" href="#problemes-lors-de-la-creation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le pilote gère la création de nouvelles base de données (comme un répertoire de
fichier .csv), en ajoutant de nouveaux fichiers csv à un répertoire existant un
fichier csv ou en ajoutant des objets à une table CSV existante. La suppression
ou le remplacement d&#8217;objets existants n&#8217;est pas gérés.</p>
<p>Options de création de couche:</p>
<ul class="simple">
<li><strong>LINEFORMAT :</strong> par défaut lors de la création d&#8217;un nouveau fichier csv
ceux-ci sont créés avec les conventions de fin de ligne de la plateforme local
(CR/LF sous win32 ou LF sur tous les autres systèmes). cela peut être écrasé
par l&#8217;utilisation de l&#8217;option de création de couche <em>LINEFORMAT</em> qui peut
avoir les valeurs <em>CRLF</em> (format DOS) ou <em>LF</em> (format Unix).</li>
<li><strong>GEOMETRY (débute avec GDAL 1.6.0) :</strong> par défaut, la géométrie d&#8217;un objet
écrit dans un fichier csv est ignoré. Il est possible d&#8217;exporter la géométrie
dans sa représentation WKT en spécifiant <tt class="docutils literal"><span class="pre">GEOMETRY=AS_WKT</span></tt>. Il est également
posible d&#8217;exporter les géométries ponctuelles dans leurs composants X,Y,Z
(différentes colonnes dans le fichier csv) en spécifiant <tt class="docutils literal"><span class="pre">GEOMETRY=AS_XYZ</span></tt>,
<tt class="docutils literal"><span class="pre">GEOMETRY=AS_XY</span></tt> ou <em>GEOMETRY=AS_YX</em>. Les colonnes géométriques seront
ajoutées à la colonne avec les valeurs des attributs.</li>
<li><strong>CREATE_CSVT=YES/NO (débute avec GDAL 1.7.0) :</strong> créer le fichier associé
.csvt (voir plus haut dans le paragraphe) pour décrire le type de chaque
colonne de la cuoche et ses largeurs et précisions optionnelles. Valeur par
défaut : NO</li>
<li><strong>SEPARATOR=COMMA/SEMICOLON/TAB (à partir de GDAL 1.7.0):</strong> caractère de
séparateur de champ. Valeur par défaut : COMMA</li>
</ul>
<div class="section" id="exemples">
<h3>Exemples<a class="headerlink" href="#exemples" title="Lien permanent vers ce titre">¶</a></h3>
<ul>
<li><p class="first">cet exemple montre l&#8217;utilisation d``&#8217;ogr2ogr`` pour transformer un shapefile
avec une géométrie ponctuelle en un fichier .csv avec les coordonnées X,Y,Z
des points comme premières colonnes dans le fichier .csv</p>
<div class="highlight-python"><pre>ogr2ogr -f CSV output.csv input.shp -lco GEOMETRY=AS_XYZ</pre>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="sources-de-donnees-particulieres">
<h2>Sources de données particulières<a class="headerlink" href="#sources-de-donnees-particulieres" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le pilote CSV peut également lire des fichiers dont la structure est proche des
fichiers CSV :</p>
<ul class="simple">
<li>Fichier données Airport NfdcFacilities.xls, NfdcRunways.xls, NfdcRemarks.xls et NfdcSchedules.xls
trouve sur le <a class="reference external" href="http://www.faa.gov/airports/airport_safety/airportdata_5010/menu/index.cfm&quot;">FAA website</a> (OGR &gt;= 1.8.0)</li>
<li>Fichier du <a class="reference external" href="http://geonames.usgs.gov/domestic/download_data.htm&quot;">USGS GNIS</a> (Geographic Names Information System) (OGR &gt;= 1.9.0)</li>
<li>The allCountries file from &lt;a href=&#8221;<a class="reference external" href="http://www.geonames.org">http://www.geonames.org</a>&#8220;&gt;GeoNames&lt;/a&gt; (OGR &gt;= 1.9.0 for direct import)</li>
</ul>
</div>
<div class="section" id="autres-remarques">
<h2>Autres remarques<a class="headerlink" href="#autres-remarques" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>le développement du pilote CSV d&#8217;OGR a été financé par
<a class="reference external" href="http://www.dmsolutions.ca/">DM Solutions Group</a> et <a class="reference external" href="http://www.gomoos.org/">GoMOOS</a>.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="dgn.html" title="Microstation DGN"
             >suivant</a></li>
        <li class="right" >
          <a href="couchdb.html" title="CouchDB - CouchDB/GeoCouch"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>