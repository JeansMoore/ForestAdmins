
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>MySQL &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="NAS - ALKIS" href="nas.html" />
    <link rel="prev" title="MSSQLSpatial - Microsoft SQL Server Spatial Database" href="mssqlspatial.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="nas.html" title="NAS - ALKIS"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="mssqlspatial.html" title="MSSQLSpatial - Microsoft SQL Server Spatial Database"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">MySQL</a><ul>
<li><a class="reference internal" href="#avertissements">Avertissements</a></li>
<li><a class="reference internal" href="#problemes-de-creation">Problèmes de création</a></li>
<li><a class="reference internal" href="#options-de-creation-de-couche">Options de création de couche</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="mssqlspatial.html"
                                  title="Chapitre précédent">MSSQLSpatial - Microsoft SQL Server Spatial Database</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="nas.html"
                                  title="Chapitre suivant">NAS - ALKIS</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/mysql.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mysql">
<span id="gdal-ogr-formats-mysql"></span><h1>MySQL<a class="headerlink" href="#mysql" title="Lien permanent vers ce titre">¶</a></h1>
<p>Le pilote implémente l&#8217;accès en lecture et écriture pour les données spatiale
dans les tables <a class="reference external" href="http://www.mysql.org/">MySQL</a>.  Cette fonctionnalité a été
introduite dans GDAL/OGR 1.3.2.</p>
<p>Lors de l&#8217;ouverture d&#8217;une base de données, son nom doit être définie sous la
forme &#8220;MYSQL:dbname[,options]&#8221; où <em>options</em> peut inclure des informations
séparées par des virgules comme &#8220;user=*userid*&#8221;, &#8220;password=*password*&#8221;,
&#8220;host=*host*&#8221; et &#8220;port=*port*&#8221;.</p>
<p>De même, une option &#8220;tables=*table*;*table*...&#8221; peut être ajouté pour
restreindre l&#8217;accès à une liste spécifique de tables dans la base de données.
Cette option est d&#8217;abord utile lorsqu&#8217;une base de données contient beaucoup de
tables, et scanner tout le schéma prendrait beaucoup de temps.</p>
<p>Pour l&#8217;instant toutes les tables habituelles sont supposées être des couches
d&#8217;un point de vue d&#8217;OGR., avec les noms des tables comme nom de couche. Les vues
nommées ne sont pas gérées pour l&#8217;instant.</p>
<p>Si un champ d&#8217;entier simple est une clé primaire, il sera utilisé comme FID
autrement le FID sera assigné séquentiellement et la recherche par FID sera
extrêmement lente.</p>
<p>Par défaut, les requêtes SQL sont passé directement au moteur de base de
données MySQL. Il est également possible de questionner le pilote pour prendre
en charge les commandes SQL avec le [[ogr_sql|moteur SQL d&#8217;OGR]], en passant
la chaine &#8220;OGRSQL&#8221; à la méthode <em>ExecuteSQL()</em>, en tant que nom du dialecte
SQL.</p>
<div class="section" id="avertissements">
<h2>Avertissements<a class="headerlink" href="#avertissements" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>Dans le cas d&#8217;une couche définie par une commande SQL, les champs soit qui
sont nommés &#8220;OGC_FID&#8221; soit ceux qui sont définie NOT NULL, ceux qui sont une
clé primaire (<em>PRIMARY KEY</em>), et ceux qui sont un champ de type entier seront
supposé être un FID.</li>
<li>Les champs géométriques sont lu à partir de MySQL en utilisant le format WKB.
Les version plus ancienne que 5.0.16 de MySQL sont connus pour avoir un
problème avec certaine génération de WKB et peuvent ne pas fonctionner
proprement.</li>
<li>La colonne OGR_FID, qui peut être écrasée avec l&#8217;option de création de couche
MYSQL_FI, est implémenté comme un champ <em>INT UNIQUE NOT NULL AUTO_INCREMENT</em>.
Cela semble créer implicitement un index sur le champ.</li>
<li>la colonne géométrique, par défaut à <em>SHAPE</em> et qui peut être écrasée avec
l&#8217;option de création de couche <em>GEOMETRY_NAME</em>, est crée comme une colonne
NOT NULL à moins que SPATIAL_INDEX soit désactivé. Par défaut, un index
spatial est crée au moment de la création de la table.</li>
<li>L&#8217;information SRS est stocké en utilisant <em>Simple Features</em> de l&#8217;OGC, avec la
création des tables de méta-données <em>geometry_columns</em> et <em>spatial_ref_sys</em>
dans la base de données définies si elles ne le sont pas déjà. La table
<em>spatial_ref_sys</em> n&#8217;est pas pré-rempli avec les valeurs EPSG et SS comme
PostGIS. Si aucun code EPSG n&#8217;ait présent  pour une table donnée, la valeur
MAX(SRID) sera utilisée.</li>
<li>Le timeouts de la connection au serveur peut être définie par la variable
d&#8217;environnement*MYSQL_TIMEOUT*. Par exemple, <em>SET MYSQL_TIMEOUT=3600</em>. Il est
possible que cette variable ait un impact seulement quand le système du
serveur MySQL est Windowss.</li>
<li>Le pilote MySQL ouvre une connection à la base de données en utilisant le
mode <em>CLIENT_INTERACTIVE</em>. Vous pouvezajuster ce paramètre
(<em>interactive_timeout</em>) dans le fichier <em>mysql.ini</em> ou <em>mysql.cnf</em> de votre
serveur.</li>
<li>Nous utilisons le WKT pour insérer les géométries dans la base de données. Si
vous insérez de grosse géométrie, vous devez faire attention du paramètre
<em>max_allowed_packet</em> dans la configuration MySQL. Par défaut, il est définie
à 1 M, mais cela peut ne pas être asse important pour les très grosses
géométries. Si vous obtenez un message d&#8217;erreur du type : <em>Got a packet bigger
than &#8216;max_allowed_packet&#8217; bytes</em>, vous devez augmenter ce paramètre.</li>
</ul>
</div>
<div class="section" id="problemes-de-creation">
<h2>Problèmes de création<a class="headerlink" href="#problemes-de-creation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le pilote MySQL ne gère pas la création de nouveaux jeu de données (une base de
données dans MySQL), mais il permet la création de nouvelles couches dans une
base existante.</p>
<p>Par défaut, le pilote MySQL tentera de préserver la précision des géométries OGR
lors de la création et la lecture des couches MySQL. Pour les champs d&#8217;entier
avec une longueur définie, il utilisera DECIMAL comme type de champ MySQL avec
une précision définie de 0. Pour les champs de type réel, il utilisera DOUBLE
de largeur et précision définie. Pour les champs caractères avec une largeur
définie, VARCHAR sera utilisé.</p>
<p>Le pilote MySQL n&#8217;essaye pas de comprendre l&#8217;encodage des caractères pour le
moment.</p>
<p>Le pilote MySQL n&#8217;est pas transactionnel pour le moment.</p>
</div>
<div class="section" id="options-de-creation-de-couche">
<h2>Options de création de couche<a class="headerlink" href="#options-de-creation-de-couche" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><strong>OVERWRITE :</strong> elle peut être définie à &#8220;YES&#8221; pour forcer les couches
existantes de même nom à être détruite avant la création de la couche demandée.</li>
<li><strong>LAUNDER :</strong> elle peut être définie à &#8220;YES&#8221; pour forcer les champs crées à
avoir leur nom traduit sous une forme plus compatible avec MySQL. Cela les
convertit en minuscule et certains caractères spéciaux comme &#8220;-&#8221; et &#8220;#&#8221; en
&#8220;_&#8221;. Si &#8220;NO&#8221; les noms exacts sont préservés. La valeur par défaut est &#8220;YES&#8221;.</li>
<li><strong>PRECISION :</strong> elle peut être à &#8220;TRUE&#8221; pour tenter de préserver la largeur et
la précision des champs lors de la création et la lecture des couches MySQL.
La valeur par défaut est &#8220;TRUE&#8221;.</li>
<li><strong>MYSQL_GEOM_COLUMN :</strong> cette option définie le nom de la colonne géométrique.
La valeur par défaut est &#8220;SHAPE&#8221;.</li>
<li><strong>MYSQL_FID :</strong> cette option définie le nom de la colonne FID. La valeur par
défaut est &#8220;OGR_FID&#8221;</li>
<li><strong>SPATIAL_INDEX :</strong> elle peut être définie &#8220;NO&#8221; pour arrêter la création
automatique d&#8217;un index spatial sur la colonne géométrique, permettant des
géométries NULL et probablement un chargement plus rapide.</li>
<li><strong>ENGINE :</strong> définie optionnellement le moteur de la base de données à
utiliser. Pour MySQL 4.x cela doit être définie à MyISAM pour les tables
spatiales.</li>
</ul>
<p>L&#8217;exemple suivant du nom de la source de données ouvre le schéma <em>westholland</em>
de la base de données dont le mot de passe est <em>psv9570</em> pour l&#8217;utilisateur
<em>root</em> sur le port 3306. Aucune nom d&#8217;hôte n&#8217;est fournit, donc localhost est
utilisé. La directive <em>table=</em> est scanné et présenté comme la couche à utiliser.</p>
<div class="highlight-python"><pre>MYSQL:westholland,user=root,password=psv9570,port=3306,tables=bedrijven</pre>
</div>
<p>L&#8217;exemple suivant utilise ogr2ogr pour créer une copie de la couche des
frontières mondiales à partir d&#8217;une shapefile dans une table MySQL. Il écrase
la table <em>borders2</em> existante, définie une option lors de la création pour
définir le nom de la colonne géométrique <em>SHAPE2</em>.</p>
<div class="highlight-python"><pre>ogr2ogr -f MySQL MySQL:test,user=root world_borders.shp -nln borders2 -update -overwrite -lco GEOMETRY_NAME=SHAPE2</pre>
</div>
<p>L&#8217;exemple suivant utilise ogrinfo pour renvoyer des informations synthétique
sur la couche <em>borders2</em> dans la base de données <em>test</em> :</p>
<div class="highlight-python"><pre>ogrinfo MySQL:test,user=root borders2 -so

    Layer name: borders2
    Geometry: Polygon
    Feature Count: 3784
    Extent: (-180.000000, -90.000000) - (180.000000, 83.623596)
    Layer SRS WKT:
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]]
    FID Column = OGR_FID
    Geometry Column = SHAPE2
    cat: Real (0.0)
    fips_cntry: String (80.0)
    cntry_name: String (80.0)
    area: Real (15.2)
    pop_cntry: Real (15.2)</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="nas.html" title="NAS - ALKIS"
             >suivant</a></li>
        <li class="right" >
          <a href="mssqlspatial.html" title="MSSQLSpatial - Microsoft SQL Server Spatial Database"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>