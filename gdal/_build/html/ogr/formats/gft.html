
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>GFT - Google Fusion Tables &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="GML - Geography Markup Language" href="gml.html" />
    <link rel="prev" title="GeoRSS : Geographically Encoded Objects pour les flux RSS" href="georss.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="gml.html" title="GML - Geography Markup Language"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="georss.html" title="GeoRSS : Geographically Encoded Objects pour les flux RSS"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">GFT - Google Fusion Tables</a><ul>
<li><a class="reference internal" href="#syntaxe-des-noms-des-jeux-de-donnees">Syntaxe des noms des jeux de données</a></li>
<li><a class="reference internal" href="#authentification">Authentification</a></li>
<li><a class="reference internal" href="#geometrie">Géométrie</a></li>
<li><a class="reference internal" href="#filtre">Filtre</a></li>
<li><a class="reference internal" href="#pagination">Pagination</a></li>
<li><a class="reference internal" href="#gestion-de-l-ecriture">Gestion de l&#8217;écriture</a></li>
<li><a class="reference internal" href="#gestion-de-l-ecriture-et-transactions-ogr">Gestion de l&#8217;écriture et transactions OGR</a></li>
<li><a class="reference internal" href="#sql">SQL</a></li>
<li><a class="reference internal" href="#exemples">Exemples</a></li>
<li><a class="reference internal" href="#voir-egalement">Voir également</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="georss.html"
                                  title="Chapitre précédent">GeoRSS : Geographically Encoded Objects pour les flux RSS</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="gml.html"
                                  title="Chapitre suivant">GML - Geography Markup Language</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/gft.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gft-google-fusion-tables">
<span id="gdal-ogr-formats-gft"></span><h1>GFT - Google Fusion Tables<a class="headerlink" href="#gft-google-fusion-tables" title="Lien permanent vers ce titre">¶</a></h1>
<p>(GDAL/OGR &gt;= 1.9.0)</p>
<p>Ce pilote peut se connecter au service Google Fusion Tables. GDAL/OGR doit être
compilé avec la gestion de Curl pour que le pilote GFT soit compilé.</p>
<p>Le pilote gère la lecture et l&#8217;écriture des opérations.</p>
<div class="section" id="syntaxe-des-noms-des-jeux-de-donnees">
<h2>Syntaxe des noms des jeux de données<a class="headerlink" href="#syntaxe-des-noms-des-jeux-de-donnees" title="Lien permanent vers ce titre">¶</a></h2>
<p>La syntaxe minimale pour ouvrir une source de données GFT est : <tt class="docutils literal"><span class="pre">GFT:</span></tt></p>
<p>Des paramètres supplémentaires optionnels peuvent être définie après le signe
&#8216;:&#8217; comme :</p>
<ul class="simple">
<li><strong>tables=table_id1[,table_id2] :</strong> une liste des ID des tables. Cela est nécessaire
lorsque vous devez accéder aux tables publiques.
Si vous voulez l&#8217;ID d&#8217;une table publique, où n&#8217;importe quelle table qui n&#8217;appartient
pas à l&#8217;utilisateur authentifié, vous devez allez voir la table dans le site
Google Fusion Tables et noter le numéro à la fin de l&#8217;URL.</li>
<li><strong>protocol=https :</strong> pour utiliser le protocole HTTPS pour toutes les opérations.
HTTP est utilisé par défaut sauf pour les opérations d&#8217;authentification où
HTTPS est toujours utilisé.</li>
<li><strong>email=martin.dupont&#64;example.com :</strong> l&#8217;email du compte Google utilisé pour
authentification.</li>
<li><strong>password=mot_de_passe_secret :</strong> le mot de passe du compte Google utilisé
pour l&#8217;authentification.</li>
<li><strong>auth=auth_key :</strong> une clé d&#8217;authentification comme décrit ci-dessous.</li>
</ul>
<p>Si plusieurs paramètres sont définie, ils doivent être séparés par un espace.</p>
</div>
<div class="section" id="authentification">
<h2>Authentification<a class="headerlink" href="#authentification" title="Lien permanent vers ce titre">¶</a></h2>
<p>La plupart des opérations, en particulier celles pour écrire, nécessite un compte
Google valide pour fournir les informations d&#8217;authentification au pilote. La seule
exception est l&#8217;accès en lecture seule des tables publiques.</p>
<p>Les informations d&#8217;authentification peuvent être fournie de différentes manières :</p>
<ul class="simple">
<li>en spécifiant les paramètres <em>email</em>  et <em>mot de passe</em>  dans le nom du jeu de
données, comme décrit plus haut.</li>
<li>en les spécifiant à travers les options de configurations/variables
d&#8217;environnements <em>GFT_EMAIL</em> et <em>GFT_PASSWORD</em>.</li>
<li>en spécifiant la clé authentification via l&#8217;option de configuration/ variable
d&#8217;environnement <em>GFT_AUTH</em>.
Cette valeur est une clé renvoyée par le serveur lors de l&#8217;utilisation de la
méthode email + mot de passe, et qui peut être réutilisée pour une
authentification ultérieure. Vous pouvez retrouver cette clé en lançant une
opération ogrinfo préliminaire avec CPL_DEBUG définie à ON et en vous
authentifiant avec une autre méthode. La valeur sera affichée après la chaîne
&#8220;Auth key : &#8221;. Cette méthode possède l&#8217;avantage de ne pas exposer votre mot de
passe en clair.</li>
<li>en spécifiant la clé d&#8217;authentification via le paramètre de connexion <em>auth</em>.</li>
</ul>
</div>
<div class="section" id="geometrie">
<h2>Géométrie<a class="headerlink" href="#geometrie" title="Lien permanent vers ce titre">¶</a></h2>
<p>Géométries dans les tables GFT doivent être exprimées dans la projection
géodésique WGS84. GFT les autorise d&#8217;être encodé sous différentes formes :</p>
<ul class="simple">
<li>une seule colonne avec une chaîne &#8220;lat lon&#8221; ou &#8220;lat,lon&#8221;, où lat et lon sont
exprimées en degré décimal.</li>
<li>un seule colonne avec une chaîne KML qui est la représentation d&#8217;un Point, une
LineString ou un Polygon.</li>
<li>deux colonnes, une avec la latitude et l&#8217;autre avec la longitude, toutes deux
exprimées en degré décimal.</li>
<li>une seule colonne avec une adresse connu par le service de géocodage de Google
Maps.</li>
</ul>
<p>Seul les trois premiers types sont géré par OGR, pas le dernier.</p>
<p>Fusion tables peut avoir plusieurs colonnes géométriques par table. Par défaut,
OGR utilisera la première colonne géométrique qu&#8217;il trouvera. Il est possible de
sélectionner une autre colonne comme colonne géométrique en spécifiant
<em>table_name(geometry_column_name)</em> comme nom de couche envoyé à <em>GetLayerByName().</em></p>
</div>
<div class="section" id="filtre">
<h2>Filtre<a class="headerlink" href="#filtre" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le pilote fera parvenir n&#8217;importe quel filtre spatial définie avec
<em>SetSpatialFilter()</em> au serveur. Il fera de même pour les filtres attributaires
définie via <em>SetAttributeFilter()</em>.</p>
</div>
<div class="section" id="pagination">
<h2>Pagination<a class="headerlink" href="#pagination" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les features sont récupérées à partir du serveur par tranche de 500 par défaut.
Ce nombre peut être modifié avec l&#8217;option de configuration <em>GFT_PAGE_SIZE</em>.</p>
</div>
<div class="section" id="gestion-de-l-ecriture">
<h2>Gestion de l&#8217;écriture<a class="headerlink" href="#gestion-de-l-ecriture" title="Lien permanent vers ce titre">¶</a></h2>
<p>La création et la suppression de table est possible. Notez que les champs ne
peuvent qu&#8217;être ajouté à une table dans laquelle il n&#8217;y a pas de feature encore
créé.</p>
<p>La gestion en écriture est seulement activée lorsque la source de données est
ouverte en mode update.</p>
<p>La correspondance entre les opérations du service GFT et les concepts OGR est la
suivante :</p>
<ul class="simple">
<li>OGRFeature::CreateFeature() &lt;==&gt; INSERT operation</li>
<li>OGRFeature::SetFeature() &lt;==&gt; UPDATE operation</li>
<li>OGRFeature::DeleteFeature() &lt;==&gt; DELETE operation</li>
<li>OGRDataSource::CreateLayer() &lt;==&gt; CREATE TABLE operation</li>
<li>OGRDataSource::DeleteLayer() &lt;==&gt; DROP TABLE operation</li>
</ul>
<p>Lors de l&#8217;insertion d&#8217;une nouvelle feature avec <em>CreateFeature()</em>, et si la
commande est réussie, OGR récupérera le rowid renvoyé et l&#8217;utilisera comme FID.
OGR reprojetera automatiquement ses géométries dans la projection géodésique
WGS84 si nécessaire (si la projection originale est liée à la géométrie).</p>
</div>
<div class="section" id="gestion-de-l-ecriture-et-transactions-ogr">
<h2>Gestion de l&#8217;écriture et transactions OGR<a class="headerlink" href="#gestion-de-l-ecriture-et-transactions-ogr" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les opérations ci-dessus sont par défaut déclenchées vers le serveur synchrone
avec l&#8217;appel à l&#8217;API d&#8217;OGR. Cela peut cependant causer des problèmes de
performances lors de l&#8217;envoie de plusieurs commandes dû à de nombreux échanges
client/serveur.</p>
<p>Il est possible d&#8217;encapsuler l&#8217;opération <em>CreateFeature()</em> entre
<em>OGRLayer::StartTransaction()</em> et <em>OGRLayer::CommitTransaction()</em>. Les opérations
seront stockées en mémoire et seulement exécutées lors de l&#8217;appel de
<em>CommitTransaction()</em>. Notez que le service GFT gère seulement jusqu&#8217;à 500
INSERTs et jusqu&#8217;à 1 Mo de contenu par transaction.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Seule <em>CreateFeature()</em> active l&#8217;utilisation du mécanisme des transactions
OGR. <em>SetFeature()</em> et <em>DeleteFeature()</em> seront toujours déclenchés
immédiatement.</p>
</div>
</div>
<div class="section" id="sql">
<h2>SQL<a class="headerlink" href="#sql" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les commandes SQL envoyées aux appels <em>OGRDataSource::ExecuteSQL()</em> sont exécutées
côté serveur, sauf si le dialecte OGRSQL est définie. Le sous ensemble de SQL
géré par le service GFT est décrit dans le lien à la fin de cette page.</p>
<p>Le SQL géré par le serveur comprend seulement les id des tables et pas les noms
des tables renvoyés par OGR. Pour convenance, cependant OGR modifiera vos
commandes SQL pour remplacer le nom de la table par son id.</p>
</div>
<div class="section" id="exemples">
<h2>Exemples<a class="headerlink" href="#exemples" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Lister les tables et les vues de l&#8217;utilisateur authentifié :</p>
<div class="highlight-python"><pre>ogrinfo -ro "GFT:email=john.doe@example.com password=secret_password"</pre>
</div>
</li>
<li><p class="first">Créer et peupler une table à partir d&#8217;un shapefile :</p>
<div class="highlight-python"><pre>ogr2ogr -f GFT "GFT:email=john.doe@example.com password=secret_password" shapefile.shp</pre>
</div>
</li>
<li><p class="first">Afficher le contenu d&#8217;une table publique avec des filtres attributaires et
spatiaux :</p>
<div class="highlight-python"><pre>ogrinfo -ro "GFT:tables=224453" -al -spat 67 31.5 67.5 32 -where "'Attack on' = 'ENEMY'"</pre>
</div>
</li>
<li><p class="first">Obtenir la clé d&#8217;authentification :</p>
<div class="highlight-python"><pre>ogrinfo --config CPL_DEBUG ON "GFT:email=john.doe@example.com password=secret_password"</pre>
</div>
<p>renvoie :</p>
<div class="highlight-python"><pre>HTTP: Fetch(https://www.google.com/accounts/ClientLogin)
HTTP: These HTTP headers were set: Content-Type: application/x-www-form-urlencoded
GFT: Auth key : A_HUGE_STRING_WITH_ALPHANUMERIC_AND_SPECIAL_CHARACTERS</pre>
</div>
<p>Maintenant vous pouvez définir la variable d&#8217;environnement GFT_AUTH à cette
valeur et utiliser simplement &#8220;GFT:&#8221; comme DSN.</p>
</li>
</ul>
</div>
<div class="section" id="voir-egalement">
<h2>Voir également<a class="headerlink" href="#voir-egalement" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://code.google.com/intl/fr/apis/fusiontables/docs/developers_guide.html">Guide du développeur de Google Fusion Tables</a></li>
<li><a class="reference external" href="http://code.google.com/intl/fr/apis/fusiontables/docs/developers_reference.html">Référence des développeurs de Google Fusion Tables</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="gml.html" title="GML - Geography Markup Language"
             >suivant</a></li>
        <li class="right" >
          <a href="georss.html" title="GeoRSS : Geographically Encoded Objects pour les flux RSS"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>