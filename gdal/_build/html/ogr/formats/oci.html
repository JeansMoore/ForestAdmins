
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>Oracle Spatial &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="ODBC RDBMS" href="odbc.html" />
    <link rel="prev" title="UK .NTF" href="ntf.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odbc.html" title="ODBC RDBMS"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="ntf.html" title="UK .NTF"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">Oracle Spatial</a><ul>
<li><a class="reference internal" href="#problemes-avec-sql">Problèmes avec SQL</a></li>
<li><a class="reference internal" href="#avertissements">Avertissements</a></li>
<li><a class="reference internal" href="#problemes-de-creation">Problèmes de création</a><ul>
<li><a class="reference internal" href="#options-de-creation-de-couche">Options de création de couche</a></li>
<li><a class="reference internal" href="#exemple">Exemple</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credits">Crédits</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="ntf.html"
                                  title="Chapitre précédent">UK .NTF</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="odbc.html"
                                  title="Chapitre suivant">ODBC RDBMS</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/oci.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="oracle-spatial">
<span id="gdal-ogr-formats-oci"></span><h1>Oracle Spatial<a class="headerlink" href="#oracle-spatial" title="Lien permanent vers ce titre">¶</a></h1>
<p>Ce pilote gère la lecture et l&#8217;écriture de données dans le format
objet-relationnel d&#8217;Oracle Spatial (8.1.7 et plus récent). Le pilote d&#8217;Oracle
Spatial n&#8217;est pas compilé par défaut dans OGR, mais peut l&#8217;être sur les
plateformes où les bibliothèques cliente d&#8217;Oracle sont disponible.</p>
<p>Lors de l&#8217;ouverture d&#8217;une base de données, son nom doit être définie sous la
forme &lt;&lt;<em>OCI:userid/password&#64;database_instance:table,table</em>&gt;&gt;. La liste des
tables est optionnelle. La partie <em>database_instance</em> peut être omise lors de
l&#8217;accès à l&#8217;instance de base de données local par défaut.</p>
<p>Si la liste des tables n&#8217;est pas fournie, alors toutes les tables apparaissant
dans la table <em>ALL_SDO_GEOM_METADATA</em> seront traité par OGR comme des couches
avec les noms de table comme nom de couche. Les tables non-spatiales ou les
tables spatiales non listé dans la table <em>ALL_SDO_GEOM_METADATA</em> ne sont pas
accessible à moins de les lister dans le nom de la source de données. Même dans
des bases de donnés où toutes les couches désirées sont dans la table
<em>ALL_SDO_GEOM_METADATA</em>, il peut être préférable de lister seulement les tables
à utiliser puisque cela peut réduire substantiellement le temps d&#8217;initialisation
dans les bases de données avec beaucoup de tables.</p>
<p>Si la table à une colonne de type entier appelée <em>OGR_FID</em> il sera utilisé comme
identifiant d&#8217;objet par OGR (et il n&#8217;apparait pas comme un attribut normal).
Lors du chargement des données dans Oracle Spatial, OGR créera toujours le champ
<em>OGR_FID</em>.</p>
<div class="section" id="problemes-avec-sql">
<h2>Problèmes avec SQL<a class="headerlink" href="#problemes-avec-sql" title="Lien permanent vers ce titre">¶</a></h2>
<p>Par défaut le pilote d&#8217;Oracle envoie une requête SQL directement au moteur
Oracle plutôt que de l&#8217;évaluer en interne lors de l&#8217;utilisation de l&#8217;appel
<em>ExecuteSQL()</em> sur <em>OGRDataSource</em>, ou l&#8217;option de commande <em>-sql</em> à <tt class="docutils literal"><span class="pre">ogr2ogr</span></tt>.
Les expressions de requête d&#8217;attributs sont également envoyé à Oracle.</p>
<p>De même deux commandes spéciales sont gérées via l&#8217;interface <em>ExecuteSQL()</em>. Ce
sont &#8220;<em>DELLAYER:&lt;table_name&gt;</em>&#8221; pour supprimer une couche et
&#8220;<em>VALLAYER:&lt;table_name&gt;</em>&#8221; pour appliquer une vérification
<em>SDO_GEOM.VALIDATE_GEOMETRY()</em> sur la couche. En interne, ces pseudo-commandes
sont traduit en commandes plus complexe pour Oracle.</p>
<p>Il est également possible de demander au pilote de prendre en charge les
commandes SQL avec le <a class="reference internal" href="../sql.html#gdal-ogr-sql"><em>SQL dans OGR</em></a>, en envoyant la chaine
&#8220;<em>OGRSQL</em>&#8221; à la méthode <em>ExecuteSQL()</em> comme nom du dialecte SQL.</p>
</div>
<div class="section" id="avertissements">
<h2>Avertissements<a class="headerlink" href="#avertissements" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li>La logique de reconnaissance de type est actuellement assez pauvre. Aucun
effort n&#8217;est fait pour préserver la longueur réelles pour les champs de type
entier et réel.</li>
<li>Différents types tels que les objets et les BLOBs dans Oracle seront
complètement ignorés par OGR.</li>
<li>Actuellement les sémantiques de transaction d&#8217;OGR ne sont pas proprement
liées aux sémantiques de transaction dans Oracle.</li>
<li>Si un attribut appelée <em>OGR_FID</em> existe dans le schéma pour les tables lues,
il sera utilisé comme FID. Les lectures aléatoires (basé sur le FID) sur des
tables sans champ FID identifié (et indexé) peut être très lente. Pour forcer
l&#8217;utilisation d&#8217;un nom de champ particulier la variable de configuration
<em>OCI_FID</em> (c&#8217;est à dire une variable d&#8217;environnement) peut être définie par
le nom du champ cible.</li>
<li>Les types de géométries courbes sont convertie en <em>linestrings</em> ou en <em>anneau
linéaire</em> en segments de 6 degrés lors de la lecture. Le pilote ne gère pas
l&#8217;écriture de géométries courbes.</li>
<li>Il n&#8217;y a pas de gestion pour les nuages de point(SDO_PC), TIN (SDO_TIN) et les
types de données de texte d&#8217;annotation dans Oracle Spatial.</li>
</ul>
</div>
<div class="section" id="problemes-de-creation">
<h2>Problèmes de création<a class="headerlink" href="#problemes-de-creation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le pilote Oracle Spatial ne gère pas la création de nouveaux jeux de données
(instances de bases de données), mais il doit permettre la création de nouvelles
couches dans une base de données existantes.</p>
<p>Dès la fermeture de <em>OGRDataSource</em> les nouvelles couches créées auront un
index spatial automatiquement créé. À ce moment la table <em>USER_SDO_GEOM_METADATA</em>
sera également mise à jour avec les limites pour la table basé sur les objets
qui ont été réellement écris. Une conséquence de cela est qu&#8217;une fois que une
couche a été chargée il n&#8217;est généralement pas possible de charger des objets
additionnel en dehors de l&#8217;étendue originel sans modifier manuellement
l&#8217;information <em>DIMINFO</em> dans <em>USER_SDO_GEOM_METADATA</em> et reconstruire l&#8217;index spatial.</p>
<div class="section" id="options-de-creation-de-couche">
<h3>Options de création de couche<a class="headerlink" href="#options-de-creation-de-couche" title="Lien permanent vers ce titre">¶</a></h3>
<ul class="simple">
<li><strong>OVERWRITE :</strong> peut être <em>YES</em> pour forcer une couche existante au nom
désiré d&#8217;être détruite avant la création de la couche demandée.</li>
<li><strong>TRUNCATE :</strong> peut être à &#8220;YES&#8221; pour forcer la table existante pour être
réutilisée, mais en vidant la table, préservant les indexes ou les dépendances.</li>
<li><strong>LAUNDER :</strong> peut être <em>YES</em> pour forcer les nouveaux champs créés sur
cette couche à avoir leurs noms de champ &#8220;nettoyer&#8221; dans une forme plus
compatible avec Oracle. Cela convertit les lettres en minuscule et certains
caractères spéciaux comme <em>-</em> et <em>#</em> en <em>_</em>. La valeur par défaut est <em>NO</em>.</li>
<li><strong>PRECISION :</strong> peut être <em>YES</em> pour forcer de nouveaux champs à créer sur
cette couche pour essayer et représenter l&#8217;information de la largeur et de la
précision, en utilisant les types <em>NUMBER(largeur,précision)</em> ou
<em>VARCHAR2(largeur)</em> si disponible. Si <em>NO</em> alors les les types <em>NUMBER</em>,
<em>INTEGER</em> et <em>VARCHAR2</em> seront utilisés à la place. La valeur par défaut est
<em>YES</em>.</li>
<li><strong>DIM :</strong> peut être définie à 2 ou 3 pour forcer la dimension de la couche
créée. S&#8217;il n&#8217;est pas définie, 3 est utilisé par défaut.</li>
<li><strong>INDEX :</strong> peut être définie à <em>OFF</em> pour désactiver la création d&#8217;un
index spatial quand une couche est chargé complètement. Par défaut un index
est créé si n&#8217;importe quel objet d&#8217;une couche possède des géométries valides.</li>
<li><strong>INDEX_PARAMETERS :</strong> peut être utilisé pour passer des paramètres de
création lorsque l&#8217;index spatial est créé. Par exemple définir
<em>INDEX_PARAMETERS</em> à <em>SDO_LEVEL=5</em> entrainera l&#8217;utilisation d&#8217;un index à
tuile de 5 niveaux. Par défaut aucun paramètre n&#8217;est passé entrainant la
création d&#8217;un index spatial R-Tree.</li>
<li><strong>DIMINFO_X :</strong> peut être définie aux valeurs xmin,xmax,xres pour contrôler
l&#8217;information de la dimension X écrite dans la table <em>USER_SDO_GEOM_METADATA</em>.
Par défaut les étendues sont collectées à partir des données écrites réelles.</li>
<li><strong>DIMINFO_Y :</strong> peut être définie aux valeurs ymin,ymax,yres pour contrôler
l&#8217;information de la dimension Y écrite dans la table <em>USER_SDO_GEOM_METADATA</em>.
Par défaut les étendues sont collectées à partir des données écrites réelles.</li>
<li><strong>DIMINFO_Z :</strong> peut être définie aux valeurs zmin,zmax,zres pour contrôler
l&#8217;information de la dimension Z écrite dans la table <em>USER_SDO_GEOM_METADATA</em>.
Par défaut les valeurs fixées de -100000,100000,0.002 sont utilisées pour les
couches avec une 3e dimension.</li>
<li><strong>SRID :</strong> Par défaut, ce pilote tentera de trouver une ligne existante dans
la table <em>MDSYS.CS_SRS</em> avec un système de coordonnées au format Well known
Text correspondant exactement à celui du jeu de données. Si aucun n&#8217;est trouvé,
une nouvelle ligne sera ajoutée à cette table. L&#8217;option de création de SRID
permet aux utilisateurs de forcer l&#8217;utilisation d&#8217;un SRID Oracle existant
même s&#8217;il ne correspond pas exactement au WKT auquel le pilote s&#8217;attend.</li>
<li><strong>MULTI_LOAD :</strong> Si activé les nouveaux objets seront créés en groupe de 100
par commande INSERT SQL, au lieu que chaque objet soit une commande INSERT
séparée. En ayant cela activé est le moyen le plus rapide de charger des
données rapidement. Le mode multi-load est activé par défaut, et peut être
forcé pour ne pas l&#8217;être pour les couches existantes ou pour les nouvelles
couches en la définissant à <em>NO</em>.</li>
<li><strong>LOADER_FILE :</strong> Si cette option est définie, toutes les informations des
objets seront écrites dans un fichier utilisable avec le chargeur SQL au lieu
d&#8217;être insérées directement dans la base de données. La couche en elle-même
est toujours créée dans la base de données immédiatement. La gestion du
chargeur SQL est encore expérimentale, et généralement le mode <em>MULTI_LOAd</em>
activé doit être utilisé à la place lors des essaies pour des performances
optimales des chargements.</li>
<li><strong>GEOMETRY_NAME :</strong> Par défaut OGR créé de nouvelles tables avec une colonne
géométrique nommé <em>ORA_GEOMETRY</em>. Si vous préférez utiliser un nom différent,
il peut être fournit avec l&#8217;option de création de couche <em>GEOMETRY_NAME</em>.</li>
</ul>
</div>
<div class="section" id="exemple">
<h3>Exemple<a class="headerlink" href="#exemple" title="Lien permanent vers ce titre">¶</a></h3>
<p>Simple traduction d&#8217;un shapefile vers Oracle. La table &#8216;ABC&#8217; sera créée avec
les objets provenant du fichier <em>abc.shp</em> et les attributs du fichier <em>abc.dbf</em>.</p>
<div class="highlight-python"><pre>% ogr2ogr -f OCI OCI:warmerda/password@gdal800.dreadfest.com abc.shp</pre>
</div>
<p>Ce second exemple charge une couche des frontières politique à partir d&#8217;un VPF
(avec le [[ogr_ogdi|pilote OGDI]]), et renomme la couche à partir de la couche
mystérieuse d&#8217;OGDI en quelque chose de plus compréhensible. Si une table
existante au nom désiré existe elle sera écrasée.</p>
<div class="highlight-python"><pre>% ogr2ogr  -f OCI OCI:warmerda/password \
    gltp:/vrf/usr4/mpp1/v0eur/vmaplv0/eurnasia \
    -lco OVERWRITE=yes -nln polbndl_bnd 'polbndl@bnd(*)_line'</pre>
</div>
<p>Cet exemple montre l&#8217;utilisation d&#8217;<tt class="docutils literal"><span class="pre">ogrinfo</span></tt> pour évaluer une commande de
requête SQL dans Oracle. Des requêtes spécifique sophistiquées d&#8217;Oracle Spatial
peuvent également être utilisé via l&#8217;option en ligne de commande <em>-sql</em> d&#8217;<tt class="docutils literal"><span class="pre">ogrinfo</span></tt>.</p>
<div class="highlight-python"><pre>ogrinfo -ro OCI:warmerda/password -sql "SELECT pop_1994 from canada where province_name = 'Alberta'"</pre>
</div>
</div>
</div>
<div class="section" id="credits">
<h2>Crédits<a class="headerlink" href="#credits" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le développeur voudrait remercier la société <a class="reference external" href="http://www.extendthereach.com/">SRC, LLC</a>
pour son apport financier au développement de pilote.</p>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="odbc.html" title="ODBC RDBMS"
             >suivant</a></li>
        <li class="right" >
          <a href="ntf.html" title="UK .NTF"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>