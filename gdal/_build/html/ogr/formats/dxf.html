
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF8" />
    
    <title>DXF d’AutoCAD &mdash; GDAL v1.9.0 documentation</title>
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.9.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/translations.js"></script>
    <link rel="top" title="GDAL v1.9.0 documentation" href="../../index.html" />
    <link rel="up" title="Formats vecteur d’OGR" href="index.html" />
    <link rel="next" title="EDIGEO" href="edigeo.html" />
    <link rel="prev" title="DODS/OPeNDAP" href="dods.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="edigeo.html" title="EDIGEO"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="dods.html" title="DODS/OPeNDAP"
             accesskey="P">précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>


      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">DXF d&#8217;AutoCAD</a><ul>
<li><a class="reference internal" href="#elements-geres">Éléments gérés</a></li>
<li><a class="reference internal" href="#dxf-inline-blocks">DXF_INLINE_BLOCKS</a></li>
<li><a class="reference internal" href="#encodages-des-caracteres">Encodages des caractères</a></li>
<li><a class="reference internal" href="#problemes-de-creation">Problèmes de création</a><ul>
<li><a class="reference internal" href="#references-des-blocs">Références des blocs</a></li>
<li><a class="reference internal" href="#definitions-des-couches">Définitions des couches</a></li>
<li><a class="reference internal" href="#definitions-de-type-de-ligne">Définitions de type de ligne</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="dods.html"
                                  title="Chapitre précédent">DODS/OPeNDAP</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="edigeo.html"
                                  title="Chapitre suivant">EDIGEO</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/ogr/formats/dxf.txt"
                     rel="nofollow">Montrer la source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="dxf-d-autocad">
<span id="gdal-ogr-formats-dxf"></span><h1>DXF d&#8217;AutoCAD<a class="headerlink" href="#dxf-d-autocad" title="Lien permanent vers ce titre">¶</a></h1>
<p>OGR gère la lecture de la plupart des versions DXF d&#8217;AutoCAD et l&#8217;écriture des
fichiers de versions AutoCAD 2000. DXF est un format ascii utilisé pour
l&#8217;échange de données AutoCAD entre différents logiciels de l&#8217;éditeur. Le contenu
complet du fichier est représenté comme un couche unique nommée &#8220;entities&#8221;.</p>
<p>Les fichiers DXF sont considéré sans informations de géo-référencement via OGR.
Les features possèderont toutes les attributs génériques suivants :</p>
<ul class="simple">
<li>Layer : le nom de la couche DXF. Par défaut &#8220;0&#8221;.</li>
<li>SubClasses : si disponible, une liste de classes à laquelle un élément appartient.</li>
<li>ExtendedEntity : si disponible, attributs de l&#8217;entité étendue toute empilée
pour former un attribut texte unique.</li>
<li>Linetype : si disponible, le type de ligne utilisée pour cette entité.</li>
<li>EntityHandle : de quoi gérer l&#8217;entité en hexadecimal. Une sorte d&#8217;identifiant
de la feature.</li>
<li>Text : le texte des étiquettes.</li>
</ul>
<div class="section" id="elements-geres">
<h2>Éléments gérés<a class="headerlink" href="#elements-geres" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les types d&#8217;éléments suivants sont gérés :</p>
<ul class="simple">
<li>POINT : produit une feature de géométrie de type point.</li>
<li>MTEXT, TEXT : produit une feature de géométrie de type point avec des
informations de style de LABEL.</li>
<li>LINE, POLYLINE, LWPOLYLINE : traduit en LINESTRING ou POLYGON  s&#8217;il est fermé
ou non. Les polylignes arrondis (ceux avec leur sommet déplacé d&#8217;attributs <a class="footnote-reference" href="#id2" id="id1">[1]</a>)
seront tesselés. Les polylignes à unique sommet sont traduit en POINT.</li>
<li>CIRCLE, ELLIPSE, ARC :  traduit en LINESTRING, en tesselant l&#8217;arc en segment
de lignes.</li>
<li>INSERT : une tentative est faite pour insérer la définition du block comme
définie dans l&#8217;insert. Les blocks linework sont agrégés dans une seule feature
avec une collection de géométrie. Les blocs de texte sont renvoyés comme un ou
plusieurs features texte. Afin d&#8217;éviter la fusion de blocs dans une collection
de géométrie l&#8217;option de configuration <em>DXF_MERGE_BLOCK_GEOMETRIES</em> peut être
définie à <em>FALSE</em>.</li>
<li>DIMENSION : cet élément est découpé en feature en arrows et leaders, et une
feature avec une étiquette dimension.</li>
<li>HATCH : ligne et arc sont collectés comme des géométries polygone, mais aucun
effort n&#8217;est entreprise actuellement pour représenter le style de remplissage
d&#8217;entité HATCH.</li>
</ul>
<p>Une tentative raisonnable est réalisée pour préserver la couleur, la largeur de
la ligne, la taille et l&#8217;orientation du texte via les informations de styles des
features lors de la traduction des éléments. Pour l&#8217;instant aucun effort n&#8217;est
réalisé pour préserver les styles de remplissage ou les attributs de styles des
lignes complexes.</p>
<p>L&#8217;approximation des arcs, ellipses, cercles et polylignes arrondis comme linestring
est réalisée en découpant les arcs en sous-arcs inférieure au seuil d&#8217;un angle.
Cet angle est définie par <em>OGR_ARC_STEPSIZE</em>. Par défaut à 4 degrés, mais peut être
écrasé par la variable de configuration <em>OGR_ARC_STEPSIZE</em>.</p>
</div>
<div class="section" id="dxf-inline-blocks">
<h2>DXF_INLINE_BLOCKS<a class="headerlink" href="#dxf-inline-blocks" title="Lien permanent vers ce titre">¶</a></h2>
<p>Le comportement par défaut pour les entités INSERT est d&#8217;être étendue avec la
géométrie du bloc qu&#8217;ils référencent. Cependant si l&#8217;option de configuration
<em>DXF_INLINE_BLOCKS</em> est définie à la valeur <em>FALSE</em>, alors le comportement est
différent comme décrit ici.</p>
<ul class="simple">
<li>Une nouvelle couche nommée bloc sera disponible. Elle contiendra une ou
plusieurs features, elle aura également un attribut <em>BlockName</em> qui indique
quel bloc ils font partie.</li>
<li>La couche entité aura de nouveau attributs BlockName, BlockScale,
et BlockAngle.</li>
<li>Les entités INSERT remplira ces nouveaux champs avec les informations
correspondantes (ils sont null poru toutes les autres entités).</li>
<li>Les entités INSERT ne contiendront pas de bloc géométrie - ils auront à la place
une géométrie ponctuelle pour le point d&#8217;insertion.</li>
</ul>
<p>L&#8217;intention est qu&#8217;avec le paramètre <em>DXF_INLINE_BLOCKS</em> désactivé, les blocs de
références resteront comme références et le bloc original de définition sera
disponible via la couche blocs. En export cette configuration entrainera la
création de blocs identiques.</p>
</div>
<div class="section" id="encodages-des-caracteres">
<h2>Encodages des caractères<a class="headerlink" href="#encodages-des-caracteres" title="Lien permanent vers ce titre">¶</a></h2>
<p>Normalement les fichiers DXF sont dans l&#8217;encodage ANSI_1252 / Win1252.  GDAL/OGR
tente de traduire cela vers l&#8217;UTF-8 lors de la lecture puis en ANSI_1252 pour
l&#8217;écriture. Les fichiers DXF peuvent aussi avoir un champ en-tête ($DWGCODEPAGE)
indiquant l&#8217;encodage du fichier. Dans GDAL 1.8.x et plus ancien cela était ignoré
mais à partir de GDAL 1.9.0 et plus récent une tentative est réalisée pour utiliser
cela pour re-encoder des autres encodages vers l&#8217;UTF-8.  Cela fonctionnera en
fonction du nom du code d&#8217;encodage et si GDAL/OGR a été compilé avec la
bibliothèque iconv pour le re-encodage des caractères.</p>
<p>Dans certains as le paramètre <em>$DWGCODEPAGE</em> dans le fichier DXF sera erroné, ou
ne sera pas reconnu par OGR. Il peut être édité manuellement, ou la variable de
configuration <em>DXF_ENCODING</em> peut être utilisée pour écraser l&#8217;id qui sera utilisé
par OGR lors du transcodage. La valeur de <em>DXF_ENCODING</em> doit être un nom
d&#8217;encodage géré par <em>CPLRecode()</em> (ie un nom iconv), et pas un nom $DWGCODEPAGE
du DXF. Utiliser le nom &#8220;UTF-8&#8221; pour le <em>DXF_ENCODING</em> évitera toute tentative de
re-encodage lors de la lecture.</p>
</div>
<div class="section" id="problemes-de-creation">
<h2>Problèmes de création<a class="headerlink" href="#problemes-de-creation" title="Lien permanent vers ce titre">¶</a></h2>
<p>Les fichiers DXF sont écrits au format AutoCAD 2000. Un en-tête standard (Tout
jusqu&#8217;au mot clé ENTITIES) est écrit à partir du fichier <em>$GDAL_DATA/header.dxf</em>,
et le fichier <em>$GDAL_DATA/trailer.dxf</em> est ajouté après les entités. Une seule
couche peut être créée dans le fichier output.</p>
<p>Les features points avec un style de LABEL sont écrit comme des entités MTEXT
basé sur les informations de style.</p>
<p>Les features points sans style de LABEL sont écrits sous forme d&#8217;entité POINT.</p>
<p>LineString, MultiLineString, Polygon et MultiPolygons sont écrit sous forme d&#8217;une
ou plusieurs entités LWPOLYLINE, fermé dans le cas d&#8217;un anneau polygonale. Un
effort est réalisé pour préserver la largeur des lignes et leur couleur.</p>
<p>La création de jeu de données gère les options de création de jeu de données
suivants :</p>
<ul class="simple">
<li><strong>HEADER=filename :</strong> écrase le fichier d&#8217;en-tête utilisé - au lieu de header.dxf.</li>
<li><strong>TRAILER=filename :</strong> écrase le fichier trailer utilisé - au lieu de trailer.dxf.</li>
</ul>
<p>Notez que dans GDAL 1.8 et supérieur, les modèles d&#8217;en-tête et trailer peut être
des fichiers DXF complet. Le pilote les scannera et extraira seulement les
portions nécessaires (portion avant ou après la section ENTITIES).</p>
<div class="section" id="references-des-blocs">
<h3>Références des blocs<a class="headerlink" href="#references-des-blocs" title="Lien permanent vers ce titre">¶</a></h3>
<p>Il est possible d&#8217;exporter un &#8220;bloc&#8221; de couche vers le DXF en plus de la couche
&#8220;entities&#8221; dans le but de produire les définitions des BLOCKs réel DXF dans le
fichier en sortie. Il est également possible d&#8217;écrire les entités INSERT si un
nom de bloc est fournie pour une entité. Pour que cela fonctionne les conditions
suivantes s&#8217;appliquent :</p>
<ul class="simple">
<li>une couche &#8220;blocks&#8221; peut être créée, et elle doit être créé avant la couche
entité.</li>
<li>les entités dans la couche blocks doivent avoir le champs BlockName remplis.</li>
<li>Les objets à écrire comme INSERTs dans la couche entités doivent avoir une
géométrie POINT et le champ BlockName définie.</li>
<li>si un bloc (nom) est déjà définie dans l&#8217;en-tête modèle, celui-ci sera utilisé
sans vérifier si une nouvelle définition a été fournie dans la couche block.</li>
</ul>
<p>L&#8217;intention est qu&#8217;une simple traduction à partir d&#8217;un DXF avec <em>DXF_INLINE_BLOCKS</em>
définie à FALSE reproduira approximativement les blocs originaux et gardera les
entités INSERT comme des entités INSERT plutôt que des les éclater.</p>
</div>
<div class="section" id="definitions-des-couches">
<h3>Définitions des couches<a class="headerlink" href="#definitions-des-couches" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lors de l&#8217;écriture des entités, si il est rempli  le champs LayerName est utilisé
pour définir la couche entités écrite. Si la couche n&#8217;est pas déjà définie dans
le modèle d&#8217;en-tête alors une nouvelle définition de couche sera introduite, copiée
de la définition de la couche par défaut (&#8220;0&#8221;).</p>
</div>
<div class="section" id="definitions-de-type-de-ligne">
<h3>Définitions de type de ligne<a class="headerlink" href="#definitions-de-type-de-ligne" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lors de l&#8217;écriture des entités LWPOLYLINE les règles suivantes s&#8217;appliquent au
regard des définitions Linetype.</p>
<ul class="simple">
<li>Si le champ Linetype est définie sur les features écrites et que Linetype est
déjà définie dans le modèle d&#8217;en-tête alors il sera référencé à partir des
entités sans vérifier si un style OGR existe.</li>
<li>Si le Linetype est définie mais que le Linetype n&#8217;est pas prédéfinie dans le
modèle d&#8217;en-tête alors une définition sera ajoutée si la feature possède un
style OGR avec un outil PEN et ne définition de motif &#8220;p&#8221;.</li>
<li>Si la feature n&#8217;a pas de champs Linetype définie, mais possède un style OGR avec
un outil PEN avec un motif &#8220;p&#8221; définie alors un LineType automatiquement nommée
sera créé dans le fichier en sortie.</li>
<li>Il est supposé que les motifs utilisent les unités &#8220;g&#8221; (géoréférencé) pour
définir le motif de la ligne. Sinon la mise à l&#8217;échelle des motifs DXF sera
probablement fausse - potentiellement complètement fausse.</li>
</ul>
<p>L&#8217;objectif est que le motif de style &#8220;dot dash&#8221; soient préservé lors de l&#8217;écriture
vers le DFX et que les linetypes spécifiques puisse être prédéfinie dans le
modèle d&#8217;en-tête et référencé en utilisant le champ Linetype si désiré.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>[NdT] <em>those with their budge of vertices attributes set</em></td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>


      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="edigeo.html" title="EDIGEO"
             >suivant</a></li>
        <li class="right" >
          <a href="dods.html" title="DODS/OPeNDAP"
             >précédent</a> |</li>
        <li><a href="../../index.html">GDAL v1.9.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >OGR</a> &raquo;</li>
          <li><a href="index.html" >Formats vecteur d&#8217;OGR</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
    <a href="http://creativecommons.org/licenses/by/2.0/fr/deed.fr">Licence Creative Common BY</a>
    <!--
      &copy; Copyright 2011, Yves Jacolin.-->
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>